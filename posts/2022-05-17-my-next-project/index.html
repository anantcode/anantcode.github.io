<!doctype html><html lang=en dir=auto><head><link rel=icon type=image/svg+xml href="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20width=%22256%22%20height=%22256%22%20viewBox=%220%200%20100%20100%22%3E%3Crect%20width=%22100%22%20height=%22100%22%20rx=%2220%22%20fill=%22%23998bff%22/%3E%3Cpath%20d=%22M90.08%2050.06q0%204.25-1.5%207.47Q87.09%2060.75%2084.61%2062.94%2082.14%2065.12%2078.75%2066.22q-3.39%201.09-7.19%201.09-6.67.0-11.9-2.59Q54.43%2062.13%2050.06%2056.5%2041.43%2067.31%2028.44%2067.31%2024.64%2067.31%2021.25%2066.16%2017.86%2065.01%2015.33%2062.82q-2.53-2.18-3.97-5.4-1.44-3.22-1.44-7.36.0-4.14%201.5-7.42%201.49-3.28%204.02-5.46%202.53-2.19%205.98-3.34Q24.87%2032.69%2028.67%2032.69q6.55.0%2011.67%203.05%205.12%203.05%209.49%208.57%204.6-5.87%209.77-8.74%205.18-2.88%2011.5-2.88Q79.61%2032.69%2084.84%2037.41q5.24%204.71%205.24%2012.65zM70.07%2040.17q-4.83.0-8.63%203.04-3.79%203.05-6.9%207.08%202.76%203.79%206.73%206.67Q65.24%2059.83%2070.53%2059.83q5.17.0%207.99-2.76Q81.34%2054.31%2081.34%2050.17%2081.34%2045.8%2078.29%2042.98%2075.24%2040.17%2070.07%2040.17zM29.36%2059.83q4.83.0%208.91-2.58%204.08-2.59%207.07-6.96Q42.01%2045.92%2038.04%2043.04q-3.97-2.87-8.57-2.87-4.83.0-7.76%202.58-2.93%202.59-2.93%207.31.0%204.71%202.93%207.24%202.93%202.53%207.65%202.53z%22%20fill=%22%23fff%22/%3E%3C/svg%3E"><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>My Next Project | Anant Code</title><meta name=keywords content="first"><meta name=description content="npx create-next-app took ~ 1min
 Add components\note\NewNoteForm.js and its css return above component from main index.js pages\index.js
import NewNoteForm from &#34;../components/note/NewNoteForm&#34;;  export default function Home() {  return <NewNoteForm />; } Notice that Card is needed Add:
 components\ui\Card.js components\ui\Card.module.css  Note finally looks: Styling needed at root: Remember this, maybe _app.js that will work on ALL pages. Will do later
Customize NewNoteForm Add a heading
remove unwanted fields and code to read them"><meta name=author content="Anant"><link rel=canonical href=https://canonical.url/to/page><meta name=google-site-verification content="n93alLymCnvb8vf0hiJ1WShKUjmDzM0QaRUL4aRSDfY"><link crossorigin=anonymous href=/assets/css/stylesheet.min.48a18943c2fc15c38a372b8dde1f5e5dc0bc64fa6cb90f5a817d2f8c76b7f3ae.css integrity="sha256-SKGJQ8L8FcOKNyuN3h9eXcC8ZPpsuQ9agX0vjHa3864=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.2840b7fccd34145847db71a290569594bdbdb00047097f75d6495d162f5d7dff.js integrity="sha256-KEC3/M00FFhH23GikFaVlL29sABHCX911kldFi9dff8=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://anantcode.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://anantcode.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://anantcode.github.io/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://anantcode.github.io/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://anantcode.github.io/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:title" content="My Next Project"><meta property="og:description" content="npx create-next-app took ~ 1min
 Add components\note\NewNoteForm.js and its css return above component from main index.js pages\index.js
import NewNoteForm from &#34;../components/note/NewNoteForm&#34;;  export default function Home() {  return <NewNoteForm />; } Notice that Card is needed Add:
 components\ui\Card.js components\ui\Card.module.css  Note finally looks: Styling needed at root: Remember this, maybe _app.js that will work on ALL pages. Will do later
Customize NewNoteForm Add a heading
remove unwanted fields and code to read them"><meta property="og:type" content="article"><meta property="og:url" content="https://anantcode.github.io/posts/2022-05-17-my-next-project/"><meta property="og:image" content="https://anantcode.github.io/%3Cimage%20path/url%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-05-17T22:23:53+05:30"><meta property="article:modified_time" content="2022-05-17T22:23:53+05:30"><meta property="og:site_name" content="Anant Code"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://anantcode.github.io/%3Cimage%20path/url%3E"><meta name=twitter:title content="My Next Project"><meta name=twitter:description content="npx create-next-app took ~ 1min
 Add components\note\NewNoteForm.js and its css return above component from main index.js pages\index.js
import NewNoteForm from &#34;../components/note/NewNoteForm&#34;;  export default function Home() {  return <NewNoteForm />; } Notice that Card is needed Add:
 components\ui\Card.js components\ui\Card.module.css  Note finally looks: Styling needed at root: Remember this, maybe _app.js that will work on ALL pages. Will do later
Customize NewNoteForm Add a heading
remove unwanted fields and code to read them"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://anantcode.github.io/posts/"},{"@type":"ListItem","position":2,"name":"My Next Project","item":"https://anantcode.github.io/posts/2022-05-17-my-next-project/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"My Next Project","name":"My Next Project","description":"npx create-next-app took ~ 1min\n Add components\\note\\NewNoteForm.js and its css return above component from main index.js pages\\index.js\nimport NewNoteForm from \u0026#34;../components/note/NewNoteForm\u0026#34;;  export default function Home() {  return \u0026lt;NewNoteForm /\u0026gt;; } Notice that Card is needed Add:\n components\\ui\\Card.js components\\ui\\Card.module.css  Note finally looks: Styling needed at root: Remember this, maybe _app.js that will work on ALL pages. Will do later\nCustomize NewNoteForm Add a heading\nremove unwanted fields and code to read them","keywords":["first"],"articleBody":"npx create-next-app took ~ 1min\n Add components\\note\\NewNoteForm.js and its css return above component from main index.js pages\\index.js\nimport NewNoteForm from \"../components/note/NewNoteForm\";  export default function Home() {  return NewNoteForm /; } Notice that Card is needed Add:\n components\\ui\\Card.js components\\ui\\Card.module.css  Note finally looks: Styling needed at root: Remember this, maybe _app.js that will work on ALL pages. Will do later\nCustomize NewNoteForm Add a heading\nremove unwanted fields and code to read them\nSet button to 100% width\ncommit\nAdd a Login Page Add components\\login\\LoginForm.js Add components\\login\\LoginForm.module.css\nCustomize LoginForm.js\nAdd pages\\login.js\nimport LoginForm from \"../components/login/LoginForm\"; export default function Home() {  return LoginForm /; } on localhost:3000/login\ncommit\n Do something with Login Data From form (component)  page\npage has a handler that was passed as prop to form.\nwrite that handler in page: pages\\login.js\nimport LoginForm from \"../components/login/LoginForm\";  function onLogin(loginData) { ¬†console.log(loginData); }  export default function Home() { ¬†return LoginForm onLoginHandler={onLogin} /; } Logs it in browser: console.log(loginData);\ncommit\n Make the login info go to backend Create a new route pages/api/login\nexport default function handler(req, res) { ¬†res.status(200).json({ name: \"John Doe\" }); } get the req body params, by req.body:\nexport default function handler(req, res) { ¬†const loginData = req.body; ¬†console.log(loginData); //notice this log!! see later what it prints ¬†// res.status(200).json({ name: \"John Doe\" }); } Write the part that sends req: in pages/login.js\n¬†//make API call to backend to login ¬†fetch(\"/api/login\", { ¬†method: \"POST\", ¬†body: loginData, //WRONG! always stringify whatever you add in body - send it as JSON in body. ¬†}).then((res) = { ¬†console.log(res.json()); // see later that this logs a Promise! I didnt want that! ¬†}); Kept getting:\nfrom req sender part:\nthis console.log should be response from server I was expecting, why is it a promise? Will check this after taking a look at server.\nBUT on the server log in api route (previous code block in pages/api/login.js) the log was strange:\n[object Object] This is strange. I was expecting\n{\"username\":\"asdf\",\"password\":\"asdf\"} Maybe I need to parse? But parsing gave error!\nSyntaxError: Unexpected token o in JSON at position 1 Parse fails like this because the thing you are trying to parse is NOT a valid JSON. and this particular hint that there is o in ‚ÄúJSON‚Äù at position 1 usually shows the common case where [object Object] is the string you are trying to parse (thinking it is JSON). Whereas it is actually a string but not JSON string - \"[object Object]\". This SO answer helps\nWhy is there a string \"[object Object]\" in req.body - what do I do with a string like this!\nits not an object - its not a JSON string!!! - this made me realize that the request sending has happend incorrectly !!\nThe req body when doing POST req should not be made to contain an object directly - otherwise be prepared for \"[object Object]\" at server req.body üòú\nCorrect thing - ALWAYS send an JS OBJECT as JSON string in req body\n In other words, ALWAYS JSON.stringify any object you wanna pass in request body when doing POST call.\n  And why is the req. sender logging a promise?\nReading docs of fetch\nGoogled node fetch Nahi Nahi browser fetch\nfrom MDN docs\n The¬†fetch()¬†method takes one mandatory argument, the path to the resource you want to fetch. It returns a¬†Promise¬†that resolves to the¬†Response¬†to that request ‚Äî as soon as the server responds with headers ‚Äî¬†even if the server response is an HTTP error status. You can also optionally pass in an¬†init¬†options object as the second argument (see¬†Request).\n Then I saw how this works!\nfetch('http://example.com/movies.json')  .then(response = response.json())  .then(data = console.log(data)); cant stop at response.json(), even that returns a promise. use one more then and you get the data.\nCool thing is, you get the data as object. That is what .json() did - get the json part from response and return object of it.\nFinally saw this works (see comments for learning from mistakes)\n¬†//make API call to backend to login ¬†fetch(\"/api/login\", { ¬†method: \"POST\", ¬†body: JSON.stringify(loginData), ¬†}) ¬†.then((res) = { ¬†// console.log(res.json()); //This causes problem!!! cant log and return later. Do .json() only once, when returning. Doing it during logging and returning both, caused error ¬†return res.json(); ¬†}) ¬†.then((data) = console.log(\"final: \" + data.name)); It printed final: John Doe as expected, from the fake response from our server.\nAlso learnt that cant do .json more than once.\nbody stream already read\nremove comment and good to go.\n So above code fixed everything.\nBut there‚Äôs more!!\nwe can improve: instead of promises, use asyc await\nasync function onLogin(loginData) { // ADD async ¬†console.log(loginData);  ¬†//make API call to backend to login ¬†const resp = await fetch(\"/api/login\", { // NOTE: await instead of promises ¬†method: \"POST\", ¬†body: JSON.stringify(loginData), ¬†});  ¬†const data = await resp.json(); ¬†console.log(\"final: \" + data.name);  ¬†//redirect using next/router  useRouter  .replace }  export default function Home() { ¬†return LoginForm onLoginHandler={onLogin} /; } works!\ncommit\n Redirect after login But got this error:\n# Unhandled Runtime Error ReferenceError: router is not defined ##### Source pages\\login.js (17:2)¬†@¬†_callee$ 15 | 16 | //redirect using next/router  useRouter  .replace  17 | router.push(\"/\"); | ^ 18 | } 19 | 20 | export default function Home() { Problem was:\nShould have done everthing in React Function Component:\nCorrected code:\nimport LoginForm from \"../components/login/LoginForm\"; import { useRouter } from \"next/router\";  export default function Login() { ¬†const router = useRouter(); ¬†async function onLogin(loginData) { ¬†console.log(loginData); ¬†//make API call to backend to login ¬†const resp = await fetch(\"/api/login\", { ¬†method: \"POST\", ¬†body: JSON.stringify(loginData), ¬†});  ¬†const data = await resp.json(); ¬†console.log(\"final: \" + data.name);  ¬†//redirect using next/router  useRouter  .replace ¬†router.replace(\"/\"); ¬†}  ¬†return LoginForm onLoginHandler={onLogin} /; } Works!\n Note: Clearly saw that had to restart the server npm run dev - then it worked fine. Without restarting it didnt work, wa showing old error! Seems to because change was done in RFC\n  List of Notes (home after login) new home /pages/index.js\nimport NoteList from \"../components/home/NoteList\";  export default function Home() {  return NoteList /; } Create NoteList\nmock NoteCard for now:\n Next thing to do:\n Improve the cards now. Introduce Navigation Introduce props with dummy data Introduce data fetching - DB Login  Realized the usefulness of a Trello like utility/workflow have a list - so you know the steps for any next work too, and current work go smooth, with next steps visible.\nIntroduce Navigation and Links know that have to add it in _app.js but dont remember the components. Refer example.\nCreate:\n/components/layout/Layout.js\ncomponents\\layout\\MainNavigation.js\nexport default function MainNavigation() { ¬†return ( ¬†div ¬†h1Your Notesh1 ¬†div ¬†); } Add this to _app,js\n--- a/pages/_app.js +++ b/pages/_app.js @@ -1,7 +1,13 @@ -import '../styles/globals.css' +import MainNavigation from \"../components/layout/MainNavigation\"; +import \"../styles/globals.css\";   function MyApp({ Component, pageProps }) { - return + return ( +  + + +  + );  }  No clue on what to add in Layout.\nReferring example: For CSS really no clue. So copy pasting:\nLayout.module.css - turns out very simple!!\n.main {  margin: 3rem auto;  width: 90%;  max-width: 40rem; } MainNavigation.module.css from example\nUsing Layout:\nimport MainNavigation from \"./MainNavigation\"; import classes from \"./Layout.module.css\";  export default function Layout(props) {  return (  div  MainNavigation /  main className={classes.main}{props.children}/main  /div  ); } And actually use Layout in _app.js\n--- a/pages/_app.js +++ b/pages/_app.js @@ -1,11 +1,13 @@ +import Layout from \"../components/layout/Layout\";  import MainNavigation from \"../components/layout/MainNavigation\";  import \"../styles/globals.css\";  function MyApp({ Component, pageProps }) {  return (   - - +  + +     );  }  Improve how inbox looks - NoteList really dont know the CSS - copy pasting\ncomponents\\home\\NoteList.module.css\nYe to chota sa hai!\n.list {  list-style: none;  margin: 0;  padding: 0; } NoteCard - styling from here\nNow use it in js\n  return a li\n  Wrap it with whatever Card was - because elements can have children - you created Card without content - thinking where will component come! But Card‚Äôs usage and its filling was not done just by what you see on Card - it is done by creating children.\n  Since the Card has button, it will need a function here, to work:\n    Change NoteList - dynamic using map  Going to make a [ ].js dynamic page.\ncreate a new folder\n/pages/[nodeId]/index.js\n can name a file: [pageId].js or can name a folder: [pageId]/index.js  Created this file:\nexport default function index() {  return divThis is {id}/div; }  Connect to DB DBManager\nnpm install mongodb\n Noticed that if using\nconst { MongoClient, ServerApiVersion } = require(\"mongodb\");\nIf ServerApiVersion is not in use in getStaticPaths or GSP for example, then we get error: Not sure, will need to check more\nMongo takes some time to deploy password change too:\nI was facing problem in connecting to DB - auth failed.\nI though password change on Mongoi Atlas UI is now working - because it didnt show new password. Showed something that was Chrome‚Äôs password maanger. It was a little confusing. Used other browser - it also didnt show set password editing the user.\nTo be sure, Created new cluster - deleted exising cluster (allowed only 1 free cluster)\nFinally found solution - itwas the file not getting correctly the user and pass- I was exporting a function from my secrets module. changeed it to export an object.\n This SO artivle was very useful when I faced the error:\nError: Error serializing .noteId returned from getStaticProps in ‚Äú/[noteId]‚Äù. Reason: undefined cannot be serialized as JSON. Please use null or omit this value.\nIn following, confused name of context with params.\nit was\nparams.params.noteId and I thought it looked strange.\nActually\ncontext.params.noteId is actual. **Rememer - ** lesson learnt - GSP has context as parameter (although name doesnt matter much - does not have to be context)\nexport async function getStaticProps(context) {  const noteId = context.params.noteId;  console.log(`ANN2 In props, noteId = ${context.params.noteId}`);   return {  props: {  noteId,  },  };  Did some more plumbing - got things working with DB - able to open single Note fetching data from DB. While looking at higher picture - realized that: URL should be:\n/[userId]/new-note\nUnauthenticated.\n/[userId]/inbox\nProtected. if session  proceed. if no session  redirect to Login\nIs there no way except bringing the username in URL ?\nleads to\nCan I make a link click do POST request? - Never thought this\n https://stackoverflow.com/questions/1651197/how-do-you-force-a-web-browser-to-use-post-when-getting-a-url https://stackoverflow.com/questions/3915917/make-a-link-use-post-instead-of-get  Anyway, URL seems much clean, and doable for my use.\nOr maybe query param?\nwhole question comes to:\nURL route ‚Äìvs‚Äì Query Param query param can look like\n/inbox?user=id // protected\n/new-post?user=id //\nhttps://stackoverflow.com/questions/49035670/is-it-wrong-to-use-routes-versus-query-string-parameters\nNot super duper important.\nI will go with query params then! üòÑ\nHow to get query string param from URL in nextjs - this SO\n Revising an old open point:\nIf using DB stuff outside of GSP, then need to do stringify and then parse again, otherwise get this error:\nServer Error Error: Error serializing `.notes[0].id` returned from `getStaticProps` in \"/\". Reason: `object` (\"[object Object]\") cannot be serialized as JSON. Please only return JSON serializable data types. Confirmed because when I removed the stfingify and parse, got the above error: More here: https://github.com/vercel/next.js/issues/11993#issuecomment-617375501\n Back.\nTo work with the login etc, need to think in detail, what user journeys we have - to understand the features needed to be added:\nAdd the pages:\n user does not exist your message is sent  export default function NotFound(props) {  return (  div  h1User Not Foundh1  pThe user you are looking for does not exist.p  div  ); } pages\\sent.js\nexport default function NotFound(props) {  return (  div  h1Message Sent!h1  pYour message has been sent to ___ anonymously.p  div  ); } Realized can also do like - a dedicated page, but shows component inside, so that props can be passed to the component.\n ","wordCount":"1961","inLanguage":"en","image":"https://anantcode.github.io/%3Cimage%20path/url%3E","datePublished":"2022-05-17T22:23:53+05:30","dateModified":"2022-05-17T22:23:53+05:30","author":{"@type":"Person","name":"Anant"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://anantcode.github.io/posts/2022-05-17-my-next-project/"},"publisher":{"@type":"Organization","name":"Anant Code","logo":{"@type":"ImageObject","url":"https://anantcode.github.io/%3Clink%20/%20abs%20url%3E"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://anantcode.github.io/ accesskey=h title="Anant's Blog (Alt + H)"><img src=https://anantcode.github.io/favicon.svg alt=logo aria-label=logo height=35>Anant's Blog</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://anantcode.github.io/posts/ title=Blog><span>Blog</span></a></li><li><a href=https://anantcode.github.io/archives/ title=Archive><span>Archive</span></a></li><li><a href=https://anantcode.github.io/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://anantcode.github.io/about/ title=About><span>About</span></a></li><li><a href=https://anantcode.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://anantcode.github.io/>Home</a>&nbsp;¬ª&nbsp;<a href=https://anantcode.github.io/posts/>Posts</a></div><h1 class=post-title>My Next Project</h1><div class=post-meta><span title="2022-05-17 22:23:53 +0530 IST">May 17, 2022</span>&nbsp;¬∑&nbsp;10 min&nbsp;¬∑&nbsp;Anant&nbsp;|&nbsp;<a href=https://github.com/%3cpath_to_repo%3e/content/posts/2022-05-17-my-next-project.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><figure class=entry-cover><img loading=lazy src=https://anantcode.github.io/%3Cimage%20path/url%3E alt><p></p></figure><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><ul><li><a href=#add-componentsnotenewnoteformjs-and-its-css aria-label="Add components\note\NewNoteForm.js and its css">Add <code>components\note\NewNoteForm.js</code> and its css</a></li><li><a href=#notice-that-card-is-needed aria-label="Notice that Card is needed">Notice that Card is needed</a></li><li><a href=#customize-newnoteform aria-label="Customize NewNoteForm">Customize NewNoteForm</a></li><li><a href=#add-a-login-page aria-label="Add a Login Page">Add a Login Page</a></li><li><a href=#do-something-with-login-data aria-label="Do something with Login Data">Do something with Login Data</a><ul><li><a href=#write-that-handler-in-page aria-label="write that handler in page:">write that handler in page:</a></li></ul></li><li><a href=#make-the-login-info-go-to-backend aria-label="Make the login info go to backend">Make the login info go to backend</a><ul><li><a href=#create-a-new-route aria-label="Create a new route">Create a new route</a></li></ul></li><li><a href=#redirect-after-login aria-label="Redirect after login">Redirect after login</a></li><li><a href=#list-of-notes-home-after-login aria-label="List of Notes (home after login)">List of Notes (home after login)</a></li></ul><li><a href=#realized-the-usefulness-of-a-trello-like-utilityworkflow aria-label="Realized the usefulness of a Trello like utility/workflow">Realized the usefulness of a Trello like utility/workflow</a><ul><li><a href=#introduce-navigation-and-links aria-label="Introduce Navigation and Links">Introduce Navigation and Links</a></li><li><a href=#improve-how-inbox-looks---notelist aria-label="Improve how inbox looks - NoteList">Improve how inbox looks - NoteList</a><ul><li><a href=#notecard---styling aria-label="NoteCard - styling">NoteCard - styling</a></li></ul></li><li><a href=#change-notelist---dynamic-using-map aria-label="Change NoteList - dynamic using map">Change NoteList - dynamic using map</a></li><li><a href=#connect-to-db aria-label="Connect to DB">Connect to DB</a></li><li><a href=#did-some-more-plumbing---got-things-working-with-db---able-to-open-single-note-fetching-data-from-db aria-label="Did some more plumbing - got things working with DB - able to open single Note fetching data from DB.">Did some more plumbing - got things working with DB - able to open single Note fetching data from DB.</a></li><li><a href=#url-route----vs---query-param aria-label="URL route  &amp;ndash;vs&amp;ndash; Query Param">URL route &ndash;vs&ndash; Query Param</a></li></ul></li></ul></div></details></div><div class=post-content><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>npx create-next-app
</span></span></code></pre></div><p>took ~ 1min</p><hr><h3 id=add-componentsnotenewnoteformjs-and-its-css>Add <code>components\note\NewNoteForm.js</code> and its css<a hidden class=anchor aria-hidden=true href=#add-componentsnotenewnoteformjs-and-its-css>#</a></h3><p>return above component from main index.js <code>pages\index.js</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>NewNoteForm</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;../components/note/NewNoteForm&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>Home</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>NewNoteForm</span> <span style=color:#f92672>/&gt;</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=notice-that-card-is-needed>Notice that Card is needed<a hidden class=anchor aria-hidden=true href=#notice-that-card-is-needed>#</a></h3><p>Add:</p><ol><li><code>components\ui\Card.js</code></li><li><code>components\ui\Card.module.css</code></li></ol><p>Note finally looks:
<img loading=lazy src=/2022-05-17-my-pet-project/2022-05-17-my-pet-project_2022-05-18-08-19-46.png alt></p><p>Styling needed at root: Remember this, maybe <code>_app.js</code> that will work on ALL pages. Will do later</p><h3 id=customize-newnoteform>Customize NewNoteForm<a hidden class=anchor aria-hidden=true href=#customize-newnoteform>#</a></h3><p>Add a heading</p><p>remove unwanted fields and code to read them</p><p>Set button to 100% width</p><p>commit</p><h3 id=add-a-login-page>Add a Login Page<a hidden class=anchor aria-hidden=true href=#add-a-login-page>#</a></h3><p>Add <code>components\login\LoginForm.js</code>
Add <code>components\login\LoginForm.module.css</code></p><p>Customize <code>LoginForm.js</code></p><p>Add <code>pages\login.js</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>LoginForm</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;../components/login/LoginForm&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>Home</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>LoginForm</span> <span style=color:#f92672>/&gt;</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>on <code>localhost:3000/login</code></p><p><img loading=lazy src=/2022-05-17-my-pet-project/2022-05-17-my-pet-project_2022-05-18-08-53-20.png alt></p><p>commit</p><hr><h3 id=do-something-with-login-data>Do something with Login Data<a hidden class=anchor aria-hidden=true href=#do-something-with-login-data>#</a></h3><p>From form (component) > page</p><p>page has a handler that was passed as prop to form.</p><h4 id=write-that-handler-in-page>write that handler in page:<a hidden class=anchor aria-hidden=true href=#write-that-handler-in-page>#</a></h4><p><code>pages\login.js</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-jsx data-lang=jsx><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>LoginForm</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;../components/login/LoginForm&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>onLogin</span>(<span style=color:#a6e22e>loginData</span>) {
</span></span><span style=display:flex><span>¬† <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>loginData</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>Home</span>() {
</span></span><span style=display:flex><span>¬† <span style=color:#66d9ef>return</span> &lt;<span style=color:#f92672>LoginForm</span> <span style=color:#a6e22e>onLoginHandler</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>onLogin</span>} /&gt;;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Logs it in browser: <code>console.log(loginData);</code></p><p><img loading=lazy src=/2022-05-17-my-pet-project/2022-05-17-my-pet-project_2022-05-18-12-08-40.png alt></p><p>commit</p><hr><h3 id=make-the-login-info-go-to-backend>Make the login info go to backend<a hidden class=anchor aria-hidden=true href=#make-the-login-info-go-to-backend>#</a></h3><h4 id=create-a-new-route>Create a new route<a hidden class=anchor aria-hidden=true href=#create-a-new-route>#</a></h4><p><code>pages/api/login</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>handler</span>(<span style=color:#a6e22e>req</span>, <span style=color:#a6e22e>res</span>) {
</span></span><span style=display:flex><span>¬† <span style=color:#a6e22e>res</span>.<span style=color:#a6e22e>status</span>(<span style=color:#ae81ff>200</span>).<span style=color:#a6e22e>json</span>({ <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;John Doe&#34;</span> });
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>get the req body params, by <code>req.body</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>handler</span>(<span style=color:#a6e22e>req</span>, <span style=color:#a6e22e>res</span>) {
</span></span><span style=display:flex><span>¬† <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>loginData</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>req</span>.<span style=color:#a6e22e>body</span>;
</span></span><span style=display:flex><span>¬† <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>loginData</span>);     <span style=color:#75715e>//notice this log!! see later what it prints
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>¬† <span style=color:#75715e>// res.status(200).json({ name: &#34;John Doe&#34; });
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><p>Write the part that sends req: in <code>pages/login.js</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span>¬† <span style=color:#75715e>//make API call to backend to login
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>¬† <span style=color:#a6e22e>fetch</span>(<span style=color:#e6db74>&#34;/api/login&#34;</span>, {
</span></span><span style=display:flex><span>¬† ¬† <span style=color:#a6e22e>method</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;POST&#34;</span>,
</span></span><span style=display:flex><span>¬† ¬† <span style=color:#a6e22e>body</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>loginData</span>,              <span style=color:#75715e>//WRONG! always stringify whatever you add in body - send it as JSON in body.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>¬† }).<span style=color:#a6e22e>then</span>((<span style=color:#a6e22e>res</span>) =&gt; {
</span></span><span style=display:flex><span>¬† ¬† <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>res</span>.<span style=color:#a6e22e>json</span>());    <span style=color:#75715e>// see later that this logs a Promise! I didnt want that!
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>¬† });
</span></span></code></pre></div><p>Kept getting:</p><p>from req sender part:</p><p>this console.log should be response from server I was expecting, why is it a promise?
Will check this after taking a look at server.</p><p><img loading=lazy src=/2022-05-17-my-pet-project/2022-05-17-my-pet-project_2022-05-18-22-35-16.png alt></p><p><strong>BUT on the server log in api route (previous code block in <code>pages/api/login.js</code>)</strong>
the log was strange:</p><pre tabindex=0><code>[object Object]
</code></pre><p>This is strange. I was expecting</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>{</span><span style=color:#e6db74>&#34;username&#34;</span>:<span style=color:#e6db74>&#34;asdf&#34;</span>,<span style=color:#e6db74>&#34;password&#34;</span>:<span style=color:#e6db74>&#34;asdf&#34;</span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>Maybe I need to parse?
But parsing gave error!</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>SyntaxError: Unexpected token o in JSON at position <span style=color:#ae81ff>1</span>
</span></span></code></pre></div><p>Parse fails like this because the thing you are trying to parse is NOT a valid JSON.
and this particular hint that there is <code>o</code> in &ldquo;JSON&rdquo; at position 1 usually shows the common case where <code>[object Object]</code> is the string you are trying to parse (thinking it is JSON). Whereas it is actually a string but not JSON string - <code>"[object Object]"</code>. <a href=https://stackoverflow.com/questions/38380462/syntaxerror-unexpected-token-o-in-json-at-position-1>This SO answer</a> helps</p><p>Why is there a string <code>"[object Object]"</code> in <code>req.body</code> - what do I do with a <em>string</em> like this!<br>its not an object - its not a JSON string!!! - this made me realize that the request sending has happend incorrectly !!</p><p>The <strong>req body</strong> when doing POST req should not be made to contain <strong>an object</strong> directly - otherwise be prepared for <code>"[object Object]"</code> at server <code>req.body</code> üòú</p><p>Correct thing - <strong>ALWAYS send an JS OBJECT as JSON string in req body</strong></p><blockquote><p>In other words, <strong>ALWAYS <code>JSON.stringify</code> any object you wanna pass in request body when doing POST call.</strong></p></blockquote><hr><p>And why is the req. sender logging <em>a promise</em>?</p><p>Reading docs of <code>fetch</code></p><p>Googled <code>node fetch</code>
Nahi Nahi <code>browser fetch</code></p><p>from <a href=https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API>MDN docs</a></p><blockquote><p>The¬†<code>fetch()</code>¬†method takes one mandatory argument, the path to the resource you want to fetch. It returns a¬†<a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise><code>Promise</code></a>¬†that resolves to the¬†<a href=https://developer.mozilla.org/en-US/docs/Web/API/Response><code>Response</code></a>¬†to that request ‚Äî as soon as the server responds with headers ‚Äî¬†<strong>even if the server response is an HTTP error status</strong>. You can also optionally pass in an¬†<code>init</code>¬†options object as the second argument (see¬†<a href=https://developer.mozilla.org/en-US/docs/Web/API/Request><code>Request</code></a>).</p></blockquote><p>Then I saw how this works!</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#a6e22e>fetch</span>(<span style=color:#e6db74>&#39;http://example.com/movies.json&#39;</span>)
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>then</span>(<span style=color:#a6e22e>response</span> =&gt; <span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>json</span>())
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>then</span>(<span style=color:#a6e22e>data</span> =&gt; <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>data</span>));
</span></span></code></pre></div><p>cant stop at <code>response.json()</code>, even that returns a promise. use one more <code>then</code> and you get the data.</p><p>Cool thing is, you get the data <strong>as object.</strong>
That is what .json() did - get the <code>json</code> part from response and return object of it.</p><p>Finally saw this works (see comments for learning from mistakes)</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span>¬† <span style=color:#75715e>//make API call to backend to login
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>¬† <span style=color:#a6e22e>fetch</span>(<span style=color:#e6db74>&#34;/api/login&#34;</span>, {
</span></span><span style=display:flex><span>¬† ¬† <span style=color:#a6e22e>method</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;POST&#34;</span>,
</span></span><span style=display:flex><span>¬† ¬† <span style=color:#a6e22e>body</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>JSON</span>.<span style=color:#a6e22e>stringify</span>(<span style=color:#a6e22e>loginData</span>),
</span></span><span style=display:flex><span>¬† })
</span></span><span style=display:flex><span>¬† ¬† .<span style=color:#a6e22e>then</span>((<span style=color:#a6e22e>res</span>) =&gt; {
</span></span><span style=display:flex><span>¬† ¬† ¬† <span style=color:#75715e>// console.log(res.json());        //This causes problem!!! cant log and return later. Do .json() only once, when returning. Doing it during  logging and returning both, caused error 
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>¬† ¬† ¬† <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>res</span>.<span style=color:#a6e22e>json</span>();
</span></span><span style=display:flex><span>¬† ¬† })
</span></span><span style=display:flex><span>¬† ¬† .<span style=color:#a6e22e>then</span>((<span style=color:#a6e22e>data</span>) =&gt; <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34;final: &#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>name</span>));
</span></span></code></pre></div><p>It printed <code>final: John Doe</code> as expected, from the fake response from our server.</p><p>Also learnt that cant do .json more than once.</p><p><img loading=lazy src=/2022-05-17-my-pet-project/2022-05-17-my-pet-project_2022-05-18-23-07-14.png alt></p><p><code>body stream already read</code></p><p>remove comment and good to go.</p><hr><p>So above code fixed everything.</p><p><strong>But there&rsquo;s more!!</strong></p><p>we can improve: instead of promises, use <code>asyc await</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>onLogin</span>(<span style=color:#a6e22e>loginData</span>) {             <span style=color:#75715e>// ADD async
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>¬† <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>loginData</span>);
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>¬† <span style=color:#75715e>//make API call to backend to login
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>¬† <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>resp</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>fetch</span>(<span style=color:#e6db74>&#34;/api/login&#34;</span>, {      <span style=color:#75715e>// NOTE: await instead of promises
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>¬† ¬† <span style=color:#a6e22e>method</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;POST&#34;</span>,
</span></span><span style=display:flex><span>¬† ¬† <span style=color:#a6e22e>body</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>JSON</span>.<span style=color:#a6e22e>stringify</span>(<span style=color:#a6e22e>loginData</span>),
</span></span><span style=display:flex><span>¬† });
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>¬† <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>data</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>resp</span>.<span style=color:#a6e22e>json</span>();
</span></span><span style=display:flex><span>¬† <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34;final: &#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>name</span>);
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>¬† <span style=color:#75715e>//redirect using next/router &gt; useRouter &gt; .replace
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>Home</span>() {
</span></span><span style=display:flex><span>¬† <span style=color:#66d9ef>return</span> <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>LoginForm</span> <span style=color:#a6e22e>onLoginHandler</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>onLogin</span>} <span style=color:#f92672>/&gt;</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>works!</p><p>commit</p><hr><h3 id=redirect-after-login>Redirect after login<a hidden class=anchor aria-hidden=true href=#redirect-after-login>#</a></h3><p><img loading=lazy src=/2022-05-17-my-pet-project/2022-05-17-my-pet-project_2022-05-18-23-39-13.png alt></p><p>But got this error:</p><pre tabindex=0><code># Unhandled Runtime Error

ReferenceError: router is not defined

##### Source

pages\login.js (17:2)¬†@¬†_callee$

 15 |   16 | //redirect using next/router &gt; useRouter &gt; .replace
&gt; 17 |  router.push(&#34;/&#34;);
     | ^
 18 | }
 19 |  20 | export default function Home() {
</code></pre><p>Problem was:</p><p>Should have done everthing in React Function Component:</p><p>Corrected code:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>LoginForm</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;../components/login/LoginForm&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>useRouter</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;next/router&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>Login</span>() {
</span></span><span style=display:flex><span>¬† <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>router</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>useRouter</span>();
</span></span><span style=display:flex><span>¬† <span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>onLogin</span>(<span style=color:#a6e22e>loginData</span>) {
</span></span><span style=display:flex><span>¬† ¬† <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>loginData</span>);
</span></span><span style=display:flex><span>¬† ¬† <span style=color:#75715e>//make API call to backend to login
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>¬† ¬† <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>resp</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>fetch</span>(<span style=color:#e6db74>&#34;/api/login&#34;</span>, {
</span></span><span style=display:flex><span>¬† ¬† ¬† <span style=color:#a6e22e>method</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;POST&#34;</span>,
</span></span><span style=display:flex><span>¬† ¬† ¬† <span style=color:#a6e22e>body</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>JSON</span>.<span style=color:#a6e22e>stringify</span>(<span style=color:#a6e22e>loginData</span>),
</span></span><span style=display:flex><span>¬† ¬† });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>¬† ¬† <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>data</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>resp</span>.<span style=color:#a6e22e>json</span>();
</span></span><span style=display:flex><span>¬† ¬† <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34;final: &#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>name</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>¬† ¬† <span style=color:#75715e>//redirect using next/router &gt; useRouter &gt; .replace
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>¬† ¬† <span style=color:#a6e22e>router</span>.<span style=color:#a6e22e>replace</span>(<span style=color:#e6db74>&#34;/&#34;</span>);
</span></span><span style=display:flex><span>¬† }
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>¬† <span style=color:#66d9ef>return</span> <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>LoginForm</span> <span style=color:#a6e22e>onLoginHandler</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>onLogin</span>} <span style=color:#f92672>/&gt;</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Works!</p><blockquote><p>Note: Clearly saw that had to restart the server <code>npm run dev</code> - then it worked fine. Without restarting it didnt work, wa showing old error! Seems to because change was done in RFC</p></blockquote><hr><h3 id=list-of-notes-home-after-login>List of Notes (home after login)<a hidden class=anchor aria-hidden=true href=#list-of-notes-home-after-login>#</a></h3><p>new home <code>/pages/index.js</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>NoteList</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;../components/home/NoteList&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>Home</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>NoteList</span> <span style=color:#f92672>/&gt;</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Create NoteList</p><p><img loading=lazy src=/2022-05-17-my-next-project/2022-05-17-my-next-project_2022-05-19-09-47-47.png alt></p><p>mock NoteCard for now:</p><p><img loading=lazy src=/2022-05-17-my-next-project/2022-05-17-my-next-project_2022-05-19-09-48-25.png alt></p><hr><p>Next thing to do:</p><ul><li>Improve the cards now.</li><li>Introduce Navigation</li><li>Introduce props with dummy data</li><li>Introduce data fetching - DB</li><li>Login</li></ul><h2 id=realized-the-usefulness-of-a-trello-like-utilityworkflow>Realized the usefulness of a Trello like utility/workflow<a hidden class=anchor aria-hidden=true href=#realized-the-usefulness-of-a-trello-like-utilityworkflow>#</a></h2><p>have a list - so you know the steps for any next work too, and current work go smooth, with next steps visible.</p><h3 id=introduce-navigation-and-links>Introduce Navigation and Links<a hidden class=anchor aria-hidden=true href=#introduce-navigation-and-links>#</a></h3><p>know that have to add it in <code>_app.js</code> but dont remember the components.
Refer example.</p><p>Create:</p><p><code>/components/layout/Layout.js</code></p><p><code>components\layout\MainNavigation.js</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-jsx data-lang=jsx><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>MainNavigation</span>() {
</span></span><span style=display:flex><span>¬† <span style=color:#66d9ef>return</span> (
</span></span><span style=display:flex><span>¬† ¬† &lt;<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>¬† ¬† ¬† &lt;<span style=color:#f92672>h1</span>&gt;<span style=color:#a6e22e>Your</span> <span style=color:#a6e22e>Notes</span>&lt;/<span style=color:#f92672>h1</span>&gt;
</span></span><span style=display:flex><span>¬† ¬† &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>¬† );
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Add this to _app,js</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-diff data-lang=diff><span style=display:flex><span><span style=color:#f92672>--- a/pages/_app.js
</span></span></span><span style=display:flex><span><span style=color:#f92672></span><span style=color:#a6e22e>+++ b/pages/_app.js
</span></span></span><span style=display:flex><span><span style=color:#a6e22e></span><span style=color:#75715e>@@ -1,7 +1,13 @@
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>-import &#39;../styles/globals.css&#39;
</span></span></span><span style=display:flex><span><span style=color:#f92672></span><span style=color:#a6e22e>+import MainNavigation from &#34;../components/layout/MainNavigation&#34;;
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>+import &#34;../styles/globals.css&#34;;
</span></span></span><span style=display:flex><span><span style=color:#a6e22e></span>
</span></span><span style=display:flex><span> function MyApp({ Component, pageProps }) {
</span></span><span style=display:flex><span><span style=color:#f92672>-  return &lt;Component {...pageProps} /&gt;
</span></span></span><span style=display:flex><span><span style=color:#f92672></span><span style=color:#a6e22e>+  return (
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>+    &lt;div&gt;
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>+      &lt;MainNavigation /&gt;
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>+      &lt;Component {...pageProps} /&gt;
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>+    &lt;/div&gt;
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>+  );
</span></span></span><span style=display:flex><span><span style=color:#a6e22e></span> }
</span></span></code></pre></div><hr><p>No clue on what to add in Layout.</p><p>Referring example:
For CSS really no clue. So copy pasting:</p><p>Layout.module.css - turns out very simple!!</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-css data-lang=css><span style=display:flex><span>.<span style=color:#a6e22e>main</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>margin</span>: <span style=color:#ae81ff>3</span><span style=color:#66d9ef>rem</span> <span style=color:#66d9ef>auto</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>width</span>: <span style=color:#ae81ff>90</span><span style=color:#66d9ef>%</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>max-width</span>: <span style=color:#ae81ff>40</span><span style=color:#66d9ef>rem</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>MainNavigation.module.css from <a href=https://github.com/anantcode/anote-learn-next/blob/main/components/layout/MainNavigation.module.css>example</a></p><p>Using Layout:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MainNavigation</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;./MainNavigation&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>classes</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;./Layout.module.css&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>Layout</span>(<span style=color:#a6e22e>props</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> (
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>div</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>MainNavigation</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>main</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>classes</span>.<span style=color:#a6e22e>main</span>}<span style=color:#f92672>&gt;</span>{<span style=color:#a6e22e>props</span>.<span style=color:#a6e22e>children</span>}<span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/main&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/div&gt;</span>
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>And actually use <code>Layout</code> in <code>_app.js</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-diff data-lang=diff><span style=display:flex><span><span style=color:#f92672>--- a/pages/_app.js
</span></span></span><span style=display:flex><span><span style=color:#f92672></span><span style=color:#a6e22e>+++ b/pages/_app.js
</span></span></span><span style=display:flex><span><span style=color:#a6e22e></span><span style=color:#75715e>@@ -1,11 +1,13 @@
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>+import Layout from &#34;../components/layout/Layout&#34;;
</span></span></span><span style=display:flex><span><span style=color:#a6e22e></span> import MainNavigation from &#34;../components/layout/MainNavigation&#34;;
</span></span><span style=display:flex><span> import &#34;../styles/globals.css&#34;;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>function MyApp({ Component, pageProps }) {
</span></span><span style=display:flex><span>   return (
</span></span><span style=display:flex><span>     &lt;div&gt;
</span></span><span style=display:flex><span><span style=color:#f92672>-      &lt;MainNavigation /&gt;
</span></span></span><span style=display:flex><span><span style=color:#f92672>-      &lt;Component {...pageProps} /&gt;
</span></span></span><span style=display:flex><span><span style=color:#f92672></span><span style=color:#a6e22e>+      &lt;Layout&gt;
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>+        &lt;Component {...pageProps} /&gt;
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>+      &lt;/Layout&gt;
</span></span></span><span style=display:flex><span><span style=color:#a6e22e></span>     &lt;/div&gt;
</span></span><span style=display:flex><span>   );
</span></span><span style=display:flex><span> }
</span></span></code></pre></div><hr><h3 id=improve-how-inbox-looks---notelist>Improve how inbox looks - NoteList<a hidden class=anchor aria-hidden=true href=#improve-how-inbox-looks---notelist>#</a></h3><p>really dont know the CSS - copy pasting</p><p><code>components\home\NoteList.module.css</code></p><p>Ye to chota sa hai!</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-css data-lang=css><span style=display:flex><span>.<span style=color:#a6e22e>list</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>list-style</span>: <span style=color:#66d9ef>none</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>margin</span>: <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>padding</span>: <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h4 id=notecard---styling>NoteCard - styling<a hidden class=anchor aria-hidden=true href=#notecard---styling>#</a></h4><p>from <a href=https://github.com/anantcode/anote-learn-next/blob/main/components/notes/NoteItem.module.css>here</a></p><p>Now use it in js</p><p><img loading=lazy src=/2022-05-17-my-next-project/2022-05-17-my-next-project_2022-05-21-17-41-06.png alt></p><ul><li><p>return a li</p></li><li><p>Wrap it with whatever Card was - because elements can have children - you created Card without content - thinking where will component come! But Card&rsquo;s usage and its filling was not done just by what you see on Card - it is done by creating children.</p></li></ul><p>Since the Card has button, it will need a function here, to work:</p><ul><li></li><li></li></ul><h3 id=change-notelist---dynamic-using-map>Change NoteList - dynamic using map<a hidden class=anchor aria-hidden=true href=#change-notelist---dynamic-using-map>#</a></h3><p><img loading=lazy src=/2022-05-17-my-next-project/2022-05-17-my-next-project_2022-05-21-17-53-13.png alt></p><hr><p>Going to make a [ ].js dynamic page.</p><p>create a new folder</p><p><code>/pages/[nodeId]/index.js</code></p><ul><li>can name a file: [pageId].js</li><li>or can name a folder: [pageId]/index.js</li></ul><p>Created this file:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>index</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>div</span><span style=color:#f92672>&gt;</span><span style=color:#a6e22e>This</span> <span style=color:#a6e22e>is</span> {<span style=color:#a6e22e>id</span>}<span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/div&gt;;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><hr><h3 id=connect-to-db>Connect to DB<a hidden class=anchor aria-hidden=true href=#connect-to-db>#</a></h3><p>DBManager</p><p>npm install mongodb</p><hr><p>Noticed that if using</p><p><code>const { MongoClient, ServerApiVersion } = require("mongodb");</code></p><p><del>If ServerApiVersion is not in use in getStaticPaths or GSP for example, then we get error:</del>
Not sure, will need to check more</p><p>Mongo takes some time to deploy password change too:</p><p><img loading=lazy src=/2022-05-17-my-next-project/2022-05-17-my-next-project_2022-05-22-11-47-33.png alt></p><p>I was facing problem in connecting to DB - auth failed.</p><p>I though password change on Mongoi Atlas UI is now working - because it didnt show new password.
Showed something that was Chrome&rsquo;s password maanger. It was a little confusing.
Used other browser - it also didnt show set password editing the user.</p><p>To be sure, Created new cluster - deleted exising cluster (allowed only 1 free cluster)</p><p>Finally found solution - itwas the file not getting correctly the user and pass- I was exporting a function from my secrets module. changeed it to export an object.</p><hr><p><a href=https://stackoverflow.com/questions/66106776/error-how-to-serialize-data-from-getstaticprops-next-js>This SO artivle</a> was very useful when I faced the error:</p><p>Error: Error serializing <code>.noteId</code> returned from <code>getStaticProps</code> in &ldquo;/[noteId]&rdquo;.
Reason: <code>undefined</code> cannot be serialized as JSON. Please use <code>null</code> or omit this value.</p><p>In following, confused name of context with params.</p><p>it was</p><p><code>params.params.noteId</code> and I thought it looked strange.</p><p>Actually</p><p><code>context.params.noteId</code> is actual.
**Rememer - ** lesson learnt - GSP has <code>context</code> as parameter (although name doesnt matter much - does not have to be <code>context</code>)</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>getStaticProps</span>(<span style=color:#a6e22e>context</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>noteId</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>context</span>.<span style=color:#a6e22e>params</span>.<span style=color:#a6e22e>noteId</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>`ANN2 In props, noteId = </span><span style=color:#e6db74>${</span><span style=color:#a6e22e>context</span>.<span style=color:#a6e22e>params</span>.<span style=color:#a6e22e>noteId</span><span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>props</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>noteId</span>,
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>  };
</span></span></code></pre></div><hr><h3 id=did-some-more-plumbing---got-things-working-with-db---able-to-open-single-note-fetching-data-from-db>Did some more plumbing - got things working with DB - able to open single Note fetching data from DB.<a hidden class=anchor aria-hidden=true href=#did-some-more-plumbing---got-things-working-with-db---able-to-open-single-note-fetching-data-from-db>#</a></h3><p><strong>While looking at higher picture - realized that: URL should be:</strong></p><p><code>/[userId]/new-note</code></p><p>Unauthenticated.</p><p><code>/[userId]/inbox</code></p><p>Protected.
if session > proceed.
if no session > redirect to Login</p><p>Is there no way except bringing the username in URL ?</p><p>leads to</p><p>Can I make a link click do POST request? - Never thought this</p><ol><li><a href=https://stackoverflow.com/questions/1651197/how-do-you-force-a-web-browser-to-use-post-when-getting-a-url>https://stackoverflow.com/questions/1651197/how-do-you-force-a-web-browser-to-use-post-when-getting-a-url</a></li><li><a href=https://stackoverflow.com/questions/3915917/make-a-link-use-post-instead-of-get>https://stackoverflow.com/questions/3915917/make-a-link-use-post-instead-of-get</a></li></ol><p>Anyway, URL seems much clean, and doable for my use.</p><p>Or maybe query param?</p><p>whole question comes to:</p><h3 id=url-route----vs---query-param>URL route &ndash;vs&ndash; Query Param<a hidden class=anchor aria-hidden=true href=#url-route----vs---query-param>#</a></h3><p>query param can look like</p><p><code>/inbox?user=id</code> // protected</p><p><code>/new-post?user=id</code> //</p><p><a href=https://stackoverflow.com/questions/49035670/is-it-wrong-to-use-routes-versus-query-string-parameters>https://stackoverflow.com/questions/49035670/is-it-wrong-to-use-routes-versus-query-string-parameters</a></p><p>Not super duper important.</p><p>I will go with query params then! üòÑ</p><p>How to get query string param from URL in nextjs - <a href=https://stackoverflow.com/questions/43862600/how-can-i-get-query-string-parameters-from-the-url-in-next-js>this SO</a></p><hr><p>Revising an old open point:</p><p>If using DB stuff outside of GSP, then need to do stringify and then parse again, otherwise get this error:</p><pre tabindex=0><code>Server Error
Error: Error serializing `.notes[0].id` returned from `getStaticProps` in &#34;/&#34;.
Reason: `object` (&#34;[object Object]&#34;) cannot be serialized as JSON. Please only return JSON serializable data types.
</code></pre><p>Confirmed because when I removed the stfingify and parse, got the above error:
<img loading=lazy src=/2022-05-17-my-next-project/2022-05-17-my-next-project_2022-05-24-07-38-01.png alt></p><p>More here:
<a href=https://github.com/vercel/next.js/issues/11993#issuecomment-617375501>https://github.com/vercel/next.js/issues/11993#issuecomment-617375501</a></p><hr><p>Back.</p><p>To work with the login etc, need to think in detail, what user journeys we have - to understand the features needed to be added:</p><p><img loading=lazy src=/2022-05-17-my-next-project/2022-05-17-my-next-project_2022-05-24-07-57-44.png alt></p><p>Add the pages:</p><ul><li>user does not exist</li><li>your message is sent</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-jsx data-lang=jsx><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>NotFound</span>(<span style=color:#a6e22e>props</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> (
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>h1</span>&gt;<span style=color:#a6e22e>User</span> <span style=color:#a6e22e>Not</span> <span style=color:#a6e22e>Found</span>&lt;/<span style=color:#f92672>h1</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>p</span>&gt;<span style=color:#a6e22e>The</span> <span style=color:#a6e22e>user</span> <span style=color:#a6e22e>you</span> <span style=color:#a6e22e>are</span> <span style=color:#a6e22e>looking</span> <span style=color:#66d9ef>for</span> <span style=color:#a6e22e>does</span> <span style=color:#a6e22e>not</span> <span style=color:#a6e22e>exist</span>.&lt;/<span style=color:#f92672>p</span>&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><code>pages\sent.js</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-jsx data-lang=jsx><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>NotFound</span>(<span style=color:#a6e22e>props</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> (
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>h1</span>&gt;<span style=color:#a6e22e>Message</span> <span style=color:#a6e22e>Sent</span><span style=color:#f92672>!</span>&lt;/<span style=color:#f92672>h1</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>p</span>&gt;<span style=color:#a6e22e>Your</span> <span style=color:#a6e22e>message</span> <span style=color:#a6e22e>has</span> <span style=color:#a6e22e>been</span> <span style=color:#a6e22e>sent</span> <span style=color:#a6e22e>to</span> <span style=color:#a6e22e>___</span> <span style=color:#a6e22e>anonymously</span>.&lt;/<span style=color:#f92672>p</span>&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Realized can also do like - a dedicated page, but shows component inside, so that props can be passed to the component.</p><hr></div><footer class=post-footer><ul class=post-tags><li><a href=https://anantcode.github.io/tags/first/>first</a></li></ul><nav class=paginav><a class=next href=https://anantcode.github.io/posts/2022-05-16-my-first-impressions-of-next-js-over-react/><span class=title>Next Page ¬ª</span><br><span>NextJS vs React</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share My Next Project on twitter" href="https://twitter.com/intent/tweet/?text=My%20Next%20Project&url=https%3a%2f%2fanantcode.github.io%2fposts%2f2022-05-17-my-next-project%2f&hashtags=first"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share My Next Project on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fanantcode.github.io%2fposts%2f2022-05-17-my-next-project%2f&title=My%20Next%20Project&summary=My%20Next%20Project&source=https%3a%2f%2fanantcode.github.io%2fposts%2f2022-05-17-my-next-project%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share My Next Project on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fanantcode.github.io%2fposts%2f2022-05-17-my-next-project%2f&title=My%20Next%20Project"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share My Next Project on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fanantcode.github.io%2fposts%2f2022-05-17-my-next-project%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share My Next Project on whatsapp" href="https://api.whatsapp.com/send?text=My%20Next%20Project%20-%20https%3a%2f%2fanantcode.github.io%2fposts%2f2022-05-17-my-next-project%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share My Next Project on telegram" href="https://telegram.me/share/url?text=My%20Next%20Project&url=https%3a%2f%2fanantcode.github.io%2fposts%2f2022-05-17-my-next-project%2f"><svg viewBox="2 2 28 28"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer></article></main><footer class=footer><span>&copy; 2022 <a href=https://anantcode.github.io/>Anant Code</a></span>
<span>Build with ‚ù§ using
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();var e=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView({behavior:"smooth"}),e==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${e}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>